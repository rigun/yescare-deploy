webpackJsonp([10],{104:function(e,t,a){"use strict";t.a={mounted:function(){this.$parent.tab="branchD1",this.getData(),this.getRoles(),this.getCities()},data:function(){return{load:!1,cities:[],valid:!0,typeInput:"new",role:"semua",saveRole:"",stat:"",search:"",users:[],dialog:!1,deleteDialog:!1,editDialog:!1,data:{name:null,namaEvent:null,email:null},snackbar:!1,text:"",color:null,reset:!1,editData:{name:"",email:null,role:null,password:"",phoneNumber:"",address:"",city:"",salary:0,changePassword:!1},deleteId:-1,loading:!1,loadData:!0,isPaginated:!0,isPaginationSimple:!0,defaultSortDirection:"desc",currentPage:1,perPage:10,roles:[],emailRules:[function(e){return!!e||"Email tidak boleh kosong"},function(e){return/.+@.+/.test(e)||"Email tidak valid"}],rules:{required:function(e){return!!e||"Data ini tidak boleh kosong"},numberOnly:function(e){return!isNaN(e)||"Data tidak valid, hanya diijinkan memasukkan angka"},textOnly:function(e){return RegExp(/^[A-Za-z ]+$/).test(e)||"Data tidak valid, hanya diijinkan memasukkan huruf"}}}},computed:{usersList:function(){var e=this;if(this.users.length)return this.users.filter(function(t,a){return"semua"===e.role?""===e.search||(t.detail.name.toLowerCase().includes(e.search.toLowerCase())||t.detail.user.email.toLowerCase().includes(e.search.toLowerCase())||t.detail.phoneNumber.toLowerCase().includes(e.search.toLowerCase())):t.detail.role.name===e.role&&"semua"!==e.role&&(""===e.search||(t.detail.name.toLowerCase().includes(e.search.toLowerCase())||t.detail.user.email.toLowerCase().includes(e.search.toLowerCase())||t.detail.phoneNumber.toLowerCase().includes(e.search.toLowerCase())))})},employeeRole:function(){if(this.roles.length)return this.roles.filter(function(e,t){if("owner"!==e.name&&"supplier"!==e.name&&"sales"!==e.name&&"konsumen"!==e.name)return!0})},employeeRoleOnly:function(){if(this.roles.length)return this.roles.filter(function(e,t){if("owner"!==e.name&&"supplier"!==e.name&&"sales"!==e.name&&"konsumen"!==e.name&&"semua"!==e.name)return!0})}},methods:{citiesFilter:function(e,t,a){var i=e.name.toLowerCase(),r=t.toLowerCase();return i.indexOf(r)>-1},getCities:function(){var e=this,t=this.$apiUrl+"/cities";this.$http.get(t).then(function(t){e.cities=t.data})},getRoles:function(){var e=this,t={headers:{Authorization:"Bearer "+localStorage.getItem("token")}},a=this.$apiUrl+"/role";this.$http.get(a,t).then(function(t){e.roles=t.data,e.roles.push({name:"semua"})})},seteditData:function(e){this.typeInput="edit",this.editData.id=e.detail.id,this.editData.name=e.detail.name,this.editData.phoneNumber=e.detail.phoneNumber,this.editData.address=e.detail.address,this.editData.city=e.detail.city,this.editData.salary=e.salary,this.editData.role=e.detail.role.name,this.saveRole=e.detail.role.name,null!==e.detail.user&&(this.editData.email=e.detail.user.email)},resetData:function(){this.$refs.form.reset(),this.typeInput="new",this.editData.role=null,this.editData.email=null,this.saveRole="",this.load=!1},deleteData:function(){var e=this,t={headers:{Authorization:"Bearer "+localStorage.getItem("token")}};this.load=!0;var a=this.$apiUrl+"/employee/"+this.deleteId;this.$http.delete(a,t).then(function(t){e.snackbar=!0,e.text="Data berhasil dihapus",e.color="green",e.deleteDialog=!1,e.load=!1,e.getData()}).catch(function(t){console.log(t),e.snackbar=!0,e.text="Coba Lagi",e.color="red",e.deleteDialog=!1,e.load=!1})},SendData:function(){var e=this;if(!this.$refs.form.validate())return this.snackbar=!0,this.text="Mohon untuk melengkapi form yang tersedia",void(this.color="error");if(null===this.editData.role)return this.snackbar=!0,this.text="Mohon untuk menentukan peran dari pegawai anda",void(this.color="error");this.load=!0;var t={headers:{Authorization:"Bearer "+localStorage.getItem("token")}},a=this.$apiUrl+"/employee";this.editData.branch=this.$route.params.id,this.$http.post(a,this.editData,t).then(function(t){e.resetData(),e.getData()}).catch(function(t){console.log(t.response),e.load=!1,e.snackbar=!0,e.text=t.response.data.errors.phoneNumber[0],e.color="red"})},UpdateData:function(){var e=this;if(!this.$refs.form.validate())return this.snackbar=!0,this.text="Mohon untuk melengkapi form yang tersedia",void(this.color="error");if(null===this.editData.role)return this.snackbar=!0,this.text="Mohon untuk menentukan peran dari pegawai anda",void(this.color="error");this.load=!0;var t={headers:{Authorization:"Bearer "+localStorage.getItem("token")}},a=this.$apiUrl+"/employee/"+this.editData.id;this.editData.branch=this.$route.params.id,this.$http.post(a,this.editData,t).then(function(t){e.resetData(),e.getData()}).catch(function(t){console.log(t.response),e.snackbar=!0,e.text=t.response.data.errors.phoneNumber[0],e.color="error",e.load=!1})},getData:function(){var e=this;this.editDialog=!1,this.deleteDialog=!1;var t={headers:{Authorization:"Bearer "+localStorage.getItem("token")}},a=this.$apiUrl+"/employeebyBranch/"+this.$route.params.id;this.$http.get(a,t).then(function(t){e.users=t.data,e.loadData=!1})},updateStatus:function(e){var t=this,a={headers:{Authorization:"Bearer "+localStorage.getItem("token")}},i=this.$apiUrl+"/api/user/status/"+e.id;0===e.status?e.status=1:e.status=0,this.$http.patch(i,{status:e.status},a).then(function(e){console.log(e)}).catch(function(e){console.log(e),t.snackbar=!0,t.text="Coba lagi",t.color="error",t.load=!1})}}}},132:function(e,t,a){"use strict";var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"contentlist"},[a("div",{staticClass:"flex-container"},[a("div",{staticClass:"columns m-t-10"},[e._m(0),e._v(" "),a("div",{staticClass:"column"},[a("v-flex",{staticStyle:{"margin-left":"auto"},attrs:{sm6:"","d-flex":""}},[a("v-btn",{attrs:{slot:"activator",color:"blue lighten-2",dark:""},on:{click:function(t){t.preventDefault(),e.editDialog=!0,e.typeInput="new"}},slot:"activator"},[e._v("Tambah Pegawai")])],1)],1)]),e._v(" "),a("div",{staticClass:"columns"},[a("div",{staticClass:"column"},[a("v-container",{attrs:{fluid:""}},[a("v-layout",{attrs:{row:"",wrap:"","align-center":""}},[a("v-flex",{staticStyle:{"margin-left":"auto"},attrs:{xs3:""}},[a("v-select",{attrs:{items:e.employeeRole,"item-text":"name","item-value":"name",label:"Filter Peran Pegawai",outline:""},model:{value:e.role,callback:function(t){e.role=t},expression:"role"}})],1)],1)],1)],1)]),e._v(" "),a("nav",{staticClass:"level"},[a("div",{staticClass:"level-left"},[a("b-field",{attrs:{grouped:"","group-multiline":""}},[a("b-select",{attrs:{disabled:!e.isPaginated},model:{value:e.perPage,callback:function(t){e.perPage=t},expression:"perPage"}},[a("option",{attrs:{value:"10"}},[e._v("10 per page")]),e._v(" "),a("option",{attrs:{value:"20"}},[e._v("20 per page")]),e._v(" "),a("option",{attrs:{value:"50"}},[e._v("50 per page")])])],1)],1),e._v(" "),a("div",{staticClass:"level-right"},[a("b-field",[a("b-input",{attrs:{placeholder:"Search...",type:"search",icon:"magnify"},model:{value:e.search,callback:function(t){e.search=t},expression:"search"}})],1)],1)]),e._v(" "),a("b-table",{attrs:{data:e.usersList,paginated:!0,"per-page":e.perPage,"current-page":e.currentPage,loading:e.loadData,"pagination-simple":!0,narrowed:!0,"mobile-cards":!0,striped:!0,hoverable:!0,"default-sort-direction":e.defaultSortDirection,"default-sort":"created_at"},on:{"update:currentPage":function(t){e.currentPage=t},"update:current-page":function(t){e.currentPage=t}},scopedSlots:e._u([{key:"default",fn:function(t){return[a("b-table-column",{attrs:{label:"No.",sortable:""}},[e._v(e._s(t.index+1))]),e._v(" "),a("b-table-column",{attrs:{field:"detail.name",label:"Nama",sortable:""}},[e._v(e._s(t.row.detail.name))]),e._v(" "),a("b-table-column",{attrs:{field:"detail.phoneNumber",label:"Nomor Telepon",sortable:""}},[e._v(e._s(t.row.detail.phoneNumber))]),e._v(" "),a("b-table-column",{attrs:{field:"detail.address",label:"Alamat",sortable:""}},[e._v(e._s(t.row.detail.address))]),e._v(" "),a("b-table-column",{attrs:{field:"detail.city",label:"Kota",sortable:""}},[e._v(e._s(t.row.detail.city))]),e._v(" "),a("b-table-column",{attrs:{label:"Peran",sortable:""}},[e._v(e._s(t.row.detail.role.name))]),e._v(" "),a("b-table-column",{attrs:{label:"Email"}},[null!=t.row.detail.user?a("span",[e._v(e._s(t.row.detail.user.email))]):a("span",[e._v(" - ")])]),e._v(" "),a("b-table-column",{attrs:{label:"Gaji",sortable:""}},[e._v(e._s(t.row.salary))]),e._v(" "),a("b-table-column",{attrs:{label:"Diterima pada",sortable:""}},[e._v(e._s(t.row.created_at))]),e._v(" "),a("b-table-column",{attrs:{label:""}},[a("v-menu",{attrs:{transition:"slide-x-transition","offset-x":"",left:""}},[a("v-btn",{attrs:{slot:"activator",icon:""},slot:"activator"},[a("v-icon",[e._v("more_vert")])],1),e._v(" "),a("v-list",[a("v-list-tile",{on:{click:function(a){a.preventDefault(),e.seteditData(t.row),e.editDialog=!0}}},[a("v-list-tile-title",[e._v("Perbaharui")])],1),e._v(" "),a("v-list-tile",{on:{click:function(a){a.preventDefault(),e.deleteId=t.row.id,e.deleteDialog=!0}}},[a("v-list-tile-title",[e._v("Hapus")])],1)],1)],1)],1)]}}])},[e._v(" "),a("template",{slot:"empty"},[a("section",{staticClass:"section"},[a("div",{staticClass:"content has-text-grey has-text-centered"},[a("p",[a("b-icon",{attrs:{icon:"emoticon-sad",size:"is-large"}})],1),e._v(" "),a("p",[e._v("Belum ada data pegawai, silahkan tambahkan pegawai terlebih dahulu")])])])])],2),e._v(" "),a("v-snackbar",{attrs:{color:e.color,"multi-line":!0,timeout:3e3},model:{value:e.snackbar,callback:function(t){e.snackbar=t},expression:"snackbar"}},[e._v("\r\n          "+e._s(e.text)+"\r\n          "),a("v-btn",{attrs:{dark:"",flat:""},on:{click:function(t){e.snackbar=!1}}},[e._v("\r\n            Close\r\n          ")])],1),e._v(" "),a("v-layout",{attrs:{row:"","justify-center":""}},[a("v-dialog",{attrs:{persistent:"","max-width":"600px"},model:{value:e.editDialog,callback:function(t){e.editDialog=t},expression:"editDialog"}},[a("v-form",{ref:"form",attrs:{"lazy-validation":""},model:{value:e.valid,callback:function(t){e.valid=t},expression:"valid"}},[a("v-card",[a("v-card-title",[e._v("\r\n                                    Tambahkan Pegawai\r\n                                ")]),e._v(" "),a("v-card-text",[a("v-container",{attrs:{"grid-list-md":""}},[a("v-layout",{attrs:{wrap:""}},[a("v-flex",{attrs:{xs12:""}},[a("v-text-field",{attrs:{label:"Nama*",required:"",rules:[e.rules.required,e.rules.textOnly]},model:{value:e.editData.name,callback:function(t){e.$set(e.editData,"name",t)},expression:"editData.name"}})],1),e._v(" "),a("v-flex",{attrs:{xs12:""}},[a("v-text-field",{attrs:{label:"Nomor Handphone*",required:"",rules:[e.rules.required,e.rules.numberOnly]},model:{value:e.editData.phoneNumber,callback:function(t){e.$set(e.editData,"phoneNumber",t)},expression:"editData.phoneNumber"}})],1),e._v(" "),a("v-flex",{attrs:{xs12:""}},[a("v-text-field",{attrs:{label:"Alamat*",required:"",rules:[e.rules.required]},model:{value:e.editData.address,callback:function(t){e.$set(e.editData,"address",t)},expression:"editData.address"}})],1),e._v(" "),a("v-flex",{attrs:{xs12:""}},[a("v-autocomplete",{attrs:{items:e.cities,filter:e.citiesFilter,"item-text":"name",label:"Kota",rules:[e.rules.required]},model:{value:e.editData.city,callback:function(t){e.$set(e.editData,"city",t)},expression:"editData.city"}})],1),e._v(" "),a("v-flex",{attrs:{xs12:""}},[a("v-text-field",{attrs:{label:"Gaji*",type:"number",required:"",rules:[e.rules.required,e.rules.numberOnly]},model:{value:e.editData.salary,callback:function(t){e.$set(e.editData,"salary",t)},expression:"editData.salary"}})],1),e._v(" "),a("v-flex",{attrs:{xs12:""}},[a("v-select",{attrs:{items:e.employeeRoleOnly,"item-text":"name","item-value":"name",label:"Peran",outline:""},model:{value:e.editData.role,callback:function(t){e.$set(e.editData,"role",t)},expression:"editData.role"}})],1),e._v(" "),a("v-flex",{attrs:{xs12:""}},["montir"!=e.editData.role&&null!=e.editData.role?a("v-text-field",{attrs:{label:"Email*",rules:e.emailRules},model:{value:e.editData.email,callback:function(t){e.$set(e.editData,"email",t)},expression:"editData.email"}}):e._e()],1),e._v(" "),a("v-flex",{attrs:{xs12:""}},["montir"==e.editData.role||null==e.editData.role||"edit"==e.typeInput&&"montir"!=e.saveRole?e._e():a("v-text-field",{attrs:{label:"Password*",type:"password",rules:[e.rules.required]},model:{value:e.editData.password,callback:function(t){e.$set(e.editData,"password",t)},expression:"editData.password"}})],1),e._v(" "),"montir"!=e.saveRole&&"montir"!=e.editData.role?a("v-flex",{attrs:{xs12:""}},["edit"==e.typeInput&&null!=e.editData.email?a("v-checkbox",{attrs:{label:"Ubah Password ?"},model:{value:e.editData.changePassword,callback:function(t){e.$set(e.editData,"changePassword",t)},expression:"editData.changePassword"}}):e._e()],1):e._e(),e._v(" "),a("v-flex",{attrs:{xs12:""}},[e.editData.changePassword?a("v-text-field",{attrs:{label:"Password baru*",type:"password",rules:[e.rules.required]},model:{value:e.editData.password,callback:function(t){e.$set(e.editData,"password",t)},expression:"editData.password"}}):e._e()],1)],1)],1),e._v(" "),a("small",[e._v("*Wajib diisi")])],1),e._v(" "),a("v-card-actions",[a("v-spacer"),e._v(" "),a("v-btn",{attrs:{color:"red darken-1",dark:""},on:{click:function(t){t.preventDefault(),e.editDialog=!1,e.resetData()}}},[e._v("Batal")]),e._v(" "),"new"==e.typeInput?a("v-btn",{attrs:{color:"green darken-1",dark:"",loading:e.load},on:{click:function(t){return t.preventDefault(),e.SendData()}}},[e._v("Tambahkan")]):e._e(),e._v(" "),"edit"==e.typeInput?a("v-btn",{attrs:{color:"orange darken-1",dark:"",loading:e.load},on:{click:function(t){return t.preventDefault(),e.UpdateData()}}},[e._v("Perbaharui")]):e._e()],1)],1)],1)],1)],1),e._v(" "),a("v-layout",{attrs:{row:"","justify-center":""}},[a("v-dialog",{attrs:{persistent:"","max-width":"290"},model:{value:e.deleteDialog,callback:function(t){e.deleteDialog=t},expression:"deleteDialog"}},[a("v-card",[a("v-card-title",{staticClass:"headline"},[e._v("Hapus Data Pengguna ?")]),e._v(" "),a("v-card-text",[e._v("Data yang dihapus tidak akan bisa dikembalikan lagi")]),e._v(" "),a("v-card-actions",[a("v-spacer"),e._v(" "),a("v-btn",{attrs:{color:"green darken-1",flat:""},on:{click:function(t){e.deleteDialog=!1,e.deleteId=-1}}},[e._v("Batal")]),e._v(" "),a("v-btn",{attrs:{color:"red darken-1",flat:""},on:{click:function(t){return e.deleteData()}}},[e._v("Hapus")])],1)],1)],1)],1)],1)])},r=[function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"column"},[a("h1",{staticClass:"title"},[e._v("Daftar Pegawai")])])}],l={render:i,staticRenderFns:r};t.a=l},58:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=a(104),r=a(132),l=a(12),s=l(i.a,r.a,!1,null,null,null);t.default=s.exports}});
//# sourceMappingURL=10.7b5270840703094fe245.js.map