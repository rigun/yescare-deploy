webpackJsonp([7],{135:function(t,a,e){"use strict";a.a={mounted:function(){this.$parent.tab="branchD5",this.getData(),this.getSparepart(),this.setUrut(),this.getSupplier()},data:function(){return{supplier:{name:""},errorSparepart:"",valid:!0,typeInput:"new",role:"semua",saveRole:"",stat:"",search:"",spareparts:[],branchSpareprats:[],dialog:!1,deleteDialog:!1,snackbar:!1,text:"",color:null,reset:!1,editData:{sparepart:{name:"",code:"",merk:"",type:""},branch_id:-1,position:"",limitstock:"",letak:"DPN",rak:"KACA",urut:"01",buy:null,sell:null},editDialog:!1,load:!1,deleteId:-1,loading:!1,loadData:!0,isPaginated:!0,isPaginationSimple:!0,defaultSortDirection:"asc",currentPage:1,perPage:10,roles:[],unique:!0,letak:["DPN","TGH","BLK"],rak:["KACA","DUS","BAN","KAYU"],errorMessage:"",errorCode:!1,urut:[],emailRules:[function(t){return!!t||"Email tidak boleh kosong"},function(t){return/.+@.+/.test(t)||"Email tidak valid"}],rules:{required:function(t){return!!t||"Data ini tidak boleh kosong"},numberOnly:function(t){return!isNaN(t)||"Data tidak valid, hanya diijinkan memasukkan angka"},textOnly:function(t){return RegExp(/^[A-Za-z ]+$/).test(t)||"Data tidak valid, hanya diijinkan memasukkan huruf"}}}},computed:{sparepartList:function(){var t=this;if(this.branchSpareprats.length)return this.branchSpareprats.filter(function(a,e){return""===t.search||(a.sparepart.name.toLowerCase().includes(t.search.toLowerCase())||a.sparepart.code.toLowerCase().includes(t.search.toLowerCase()))})}},methods:{getSupplier:function(){var t=this,a={headers:{Authorization:"Bearer "+localStorage.getItem("token")}},e=this.$apiUrl+"person/"+this.$route.params.supplierId;this.$http.get(e,a).then(function(a){t.supplier=a.data.result})},cekSparepartCode:function(){var t=this;this.branchSpareprats.filter(function(a,e){if(a.sparepart.code===t.editData.sparepart.code)return!0}).length>0?this.errorSparepart="Mohon maaf, sparepart ini sudah dimasukkan kedalam cabang ini.":this.errorSparepart=""},price:function(t){return new Intl.NumberFormat("id-ID",{style:"currency",currency:"IDR",minimumFractionDigits:2}).format(t)},sparepartFilter:function(t,a,e){var r=t.code.toLowerCase(),i=a.toLowerCase();return r.indexOf(i)>-1},setUrut:function(){for(var t=[],a=1;a<100;a++)a<10?t.push("0"+a):t.push(a);this.urut=t},setData:function(){var t=this,a=this.spareparts.filter(function(a,e){if(a.code===t.editData.sparepart.code)return!0});console.log(a),a.length<1?(this.errorCode=!0,this.errorMessage="Data tidak ditemukan"):(this.errorCode=!1,this.errorMessage="",this.editData.sparepart=a[0])},getSparepart:function(){var t,a=this,e={headers:{Authorization:"Bearer "+localStorage.getItem("token")}};t=this.$apiUrl+"sparepart",this.$http.get(t,e).then(function(t){a.spareparts=t.data;for(var e=0;e<a.spareparts.length;e++)a.spareparts[e].view=a.spareparts[e].code+" "+a.spareparts[e].name})},seteditData:function(t){this.typeInput="edit",this.editData.sparepart=t.sparepart,this.editData.buy=t.buy,this.editData.sell=t.sell,this.editData.stock=t.stock,this.editData.limitstock=t.limitstock,this.editData.id=t.id;var a=t.position.split("-");this.editData.letak=a[0],this.editData.rak=a[1],this.editData.urut=a[2],this.editData.sparepart.view=this.editData.sparepart.code+" "+this.editData.sparepart.name},resetData:function(t){this.loading=!1,this.deleteDialog=!1,this.deleteId=-1,this.typeInput="new",this.editData.sparepart={name:"",code:"",merk:"",type:""},this.editData.branch_id=-1,this.editData.position="",this.editData.limitstock=""},deleteData:function(){var t=this,a={headers:{Authorization:"Bearer "+localStorage.getItem("token")}},e=this.$apiUrl+"sparepartBranch/"+this.deleteId;this.$http.delete(e,a).then(function(a){t.snackbar=!0,t.text="Data berhasil dihapus",t.color="green",t.resetData(),t.getData()}).catch(function(a){console.log(a),t.snackbar=!0,t.text="Coba Lagi",t.color="red",t.resetData()})},SendData:function(){var t=this;if(!this.$refs.form.validate())return this.snackbar=!0,this.text="Mohon untuk melengkapi form yang tersedia",void(this.color="red");if(""!==this.errorSparepart)return this.snackbar=!0,this.text="Mohon untuk melengkapi form yang tersedia",void(this.color="red");if(this.errorCode)return this.snackbar=!0,this.text="Mohon untuk kode sparepart yang benar",void(this.color="error");this.editData.position=this.editData.letak+"-"+this.editData.rak+"-"+this.editData.urut,this.loading=!0,this.editData.sparepart_code=this.editData.sparepart.code;var a,e={headers:{Authorization:"Bearer "+localStorage.getItem("token")}};a=this.$apiUrl+"sparepartBranch",this.editData.branch_id=this.$route.params.id,this.$http.post(a,this.editData,e).then(function(a){t.resetData(),t.getData()}).catch(function(a){console.log(a.response),t.snackbar=!0,t.text=a.response.data.errors.phoneNumber[0],t.color="red"})},UpdateData:function(){var t=this;if(!this.$refs.form.validate())return this.snackbar=!0,this.text="Mohon untuk melengkapi form yang tersedia",void(this.color="red");if(parseInt(this.editData.total)+parseInt(this.editData.stock)<=this.editData.limitstock)return this.snackbar=!0,this.text="Mohon maaf, barang yang dipesan masih di bawah stock minimal",void(this.color="red");this.loading=!0;var a,e={headers:{Authorization:"Bearer "+localStorage.getItem("token")}};this.editData.supplier_id=this.supplier.id,this.editData.branch_id=this.$route.params.id,this.editData.sparepart_code=this.editData.sparepart.code,a=this.$apiUrl+"order",this.$http.post(a,this.editData,e).then(function(a){t.resetData(),t.getData()}).catch(function(a){console.log(a.response),t.snackbar=!0,t.text=a.response.data.errors.phoneNumber[0],t.color="red"})},getData:function(){var t=this;this.editDialog=!1,this.deleteDialog=!1;var a,e={headers:{Authorization:"Bearer "+localStorage.getItem("token")}};a=this.$apiUrl+"sparepartBS/"+this.$route.params.supplierId+"/"+this.$route.params.id,this.$http.get(a,e).then(function(a){t.branchSpareprats=a.data,t.loadData=!1})}}}},196:function(t,a,e){"use strict";var r=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"contentlist"},[e("div",{staticClass:"flex-container"},[e("nav",{staticClass:"breadcrumb",attrs:{"aria-label":"breadcrumbs"}},[e("ul",[e("li",[e("router-link",{attrs:{to:{name:"branchD3"}}},[t._v("Transaction")])],1),t._v(" "),e("li",[e("router-link",{attrs:{to:{name:"listSupplierBranch"}}},[t._v("\r\n                    Supplier\r\n                ")])],1),t._v(" "),e("li",{staticClass:"is-active"},[e("a",{attrs:{href:"#"}},[t._v(t._s(t.supplier.name))])])])]),t._v(" "),e("div",{staticClass:"columns m-t-10"},[t._m(0),t._v(" "),e("div",{staticClass:"column"},[e("v-flex",{staticStyle:{"margin-left":"auto"},attrs:{sm6:"","d-flex":""}},[e("v-btn",{attrs:{slot:"activator",color:"blue lighten-2",dark:""},slot:"activator"},[t._v("Cetak Surat Pemesanan")])],1)],1)]),t._v(" "),e("nav",{staticClass:"level"},[e("div",{staticClass:"level-left"},[e("b-field",{attrs:{grouped:"","group-multiline":""}},[e("b-select",{attrs:{disabled:!t.isPaginated},model:{value:t.perPage,callback:function(a){t.perPage=a},expression:"perPage"}},[e("option",{attrs:{value:"10"}},[t._v("10 per page")]),t._v(" "),e("option",{attrs:{value:"20"}},[t._v("20 per page")]),t._v(" "),e("option",{attrs:{value:"50"}},[t._v("50 per page")])])],1)],1),t._v(" "),e("div",{staticClass:"level-right"},[e("b-field",[e("b-input",{attrs:{placeholder:"Search...",type:"search",icon:"magnify"},model:{value:t.search,callback:function(a){t.search=a},expression:"search"}})],1)],1)]),t._v(" "),e("b-table",{attrs:{data:t.sparepartList,paginated:!0,"per-page":t.perPage,"current-page":t.currentPage,loading:t.loadData,"pagination-simple":!0,narrowed:!0,"mobile-cards":!0,striped:!0,hoverable:!0,"default-sort-direction":t.defaultSortDirection,"default-sort":"stock"},on:{"update:currentPage":function(a){t.currentPage=a},"update:current-page":function(a){t.currentPage=a}},scopedSlots:t._u([{key:"default",fn:function(a){return[e("b-table-column",{attrs:{label:"No.",sortable:""}},[t._v(t._s(a.index+1))]),t._v(" "),e("b-table-column",{attrs:{field:"code",label:"Kode",sortable:""}},[t._v(t._s(a.row.data.sparepart.code))]),t._v(" "),e("b-table-column",{attrs:{field:"picture",label:"Foto",sortable:""}},[e("img",{attrs:{src:t.$apiUrl+"images/sparepart/"+a.row.data.sparepart.picture,alt:"Foto Sparepart",width:"100"}})]),t._v(" "),e("b-table-column",{attrs:{field:"name",label:"Nama",sortable:""}},[t._v(t._s(a.row.data.sparepart.name))]),t._v(" "),e("b-table-column",{attrs:{field:"merk",label:"Merk",sortable:""}},[t._v(t._s(a.row.data.sparepart.merk))]),t._v(" "),e("b-table-column",{attrs:{field:"type",label:"Tipe",sortable:""}},[t._v(t._s(a.row.data.sparepart.type))]),t._v(" "),e("b-table-column",{attrs:{field:"position",label:"Posisi",sortable:""}},[t._v(t._s(a.row.data.position))]),t._v(" "),e("b-table-column",{attrs:{field:"stock",label:"Stock",sortable:""}},[t._v(t._s(a.row.data.stock))]),t._v(" "),e("b-table-column",{attrs:{label:"Stock Minimal",sortable:""}},[t._v(t._s(a.row.data.limitstock))]),t._v(" "),e("b-table-column",{attrs:{label:"Harga Beli",sortable:""}},[t._v(t._s(t.price(a.row.data.buy)))]),t._v(" "),e("b-table-column",{attrs:{label:"Harga Jual",sortable:""}},[t._v(t._s(t.price(a.row.data.sell)))]),t._v(" "),e("b-table-column",{attrs:{label:"Jumlah Yang dipesan",sortable:""}},[t._v(t._s(a.row.total))]),t._v(" "),e("b-table-column",{attrs:{label:""}},[e("v-menu",{attrs:{transition:"slide-x-transition","offset-x":"",left:""}},[e("v-btn",{attrs:{slot:"activator",icon:""},slot:"activator"},[e("v-icon",[t._v("more_vert")])],1),t._v(" "),e("v-list",[e("v-list-tile",{on:{click:function(e){e.preventDefault(),t.seteditData(a.row.data),t.editDialog=!0}}},[e("v-list-tile-title",[t._v("Perbaharui")])],1),t._v(" "),e("v-list-tile",{on:{click:function(e){e.preventDefault(),t.deleteId=a.row.id,t.deleteDialog=!0}}},[e("v-list-tile-title",[t._v("Hapus")])],1)],1)],1)],1)]}}])},[t._v(" "),e("template",{slot:"empty"},[e("section",{staticClass:"section"},[e("div",{staticClass:"content has-text-grey has-text-centered"},[e("p",[e("b-icon",{attrs:{icon:"emoticon-sad",size:"is-large"}})],1),t._v(" "),e("p",[t._v("Belum ada data sparepart, silahkan tambahkan sparepart terlebih dahulu")])])])])],2),t._v(" "),e("v-snackbar",{attrs:{color:t.color,"multi-line":!0,timeout:3e3},model:{value:t.snackbar,callback:function(a){t.snackbar=a},expression:"snackbar"}},[t._v("\r\n          "+t._s(t.text)+"\r\n          "),e("v-btn",{attrs:{dark:"",flat:""},on:{click:function(a){t.snackbar=!1}}},[t._v("\r\n            Close\r\n          ")])],1),t._v(" "),e("v-layout",{attrs:{row:"","justify-center":""}},[e("v-dialog",{attrs:{persistent:"","max-width":"600px"},model:{value:t.editDialog,callback:function(a){t.editDialog=a},expression:"editDialog"}},[e("v-form",{ref:"form",attrs:{"lazy-validation":""},model:{value:t.valid,callback:function(a){t.valid=a},expression:"valid"}},[e("v-card",[e("v-card-title",[t._v("\r\n                                    Tambahkan Sparepart\r\n                                ")]),t._v(" "),e("v-card-text",[e("v-container",{attrs:{"grid-list-md":""}},[e("v-layout",{attrs:{wrap:""}},[e("v-flex",{attrs:{xs12:""}},["edit"!=t.typeInput?e("v-autocomplete",{attrs:{items:t.spareparts,filter:t.sparepartFilter,"item-text":"view",label:"Sparepart yang tersedia dicabang ini (kode sparepart)",rules:[t.rules.required],"return-object":"","error-messages":t.errorSparepart},on:{input:function(a){return t.cekSparepartCode()}},model:{value:t.editData.sparepart,callback:function(a){t.$set(t.editData,"sparepart",a)},expression:"editData.sparepart"}}):t._e()],1),t._v(" "),e("v-flex",{attrs:{xs12:""}},[e("v-text-field",{attrs:{label:"Kode Sparepart*",disabled:!0},model:{value:t.editData.sparepart.code,callback:function(a){t.$set(t.editData.sparepart,"code",a)},expression:"editData.sparepart.code"}})],1),t._v(" "),e("v-flex",{attrs:{xs12:""}},[e("v-text-field",{attrs:{label:"Nama Sparepart*",disabled:!0},model:{value:t.editData.sparepart.name,callback:function(a){t.$set(t.editData.sparepart,"name",a)},expression:"editData.sparepart.name"}})],1),t._v(" "),e("v-flex",{attrs:{xs12:""}},[e("v-text-field",{attrs:{label:"Merk Sparepart*",disabled:!0},model:{value:t.editData.sparepart.merk,callback:function(a){t.$set(t.editData.sparepart,"merk",a)},expression:"editData.sparepart.merk"}})],1),t._v(" "),e("v-flex",{attrs:{xs12:""}},[e("v-text-field",{attrs:{type:"text",label:"Stock Saat Ini",disabled:!0},model:{value:t.editData.stock,callback:function(a){t.$set(t.editData,"stock",a)},expression:"editData.stock"}})],1),t._v(" "),e("v-flex",{attrs:{xs12:""}},[e("v-text-field",{attrs:{type:"text",label:"Stock Minimal Sparepart",disabled:!0},model:{value:t.editData.limitstock,callback:function(a){t.$set(t.editData,"limitstock",a)},expression:"editData.limitstock"}})],1),t._v(" "),e("v-flex",{attrs:{xs12:""}},[e("v-text-field",{attrs:{type:"text",label:"Jumlah pesanan",rules:[t.rules.required,t.rules.numberOnly]},model:{value:t.editData.total,callback:function(a){t.$set(t.editData,"total",a)},expression:"editData.total"}})],1),t._v(" "),e("v-flex",{attrs:{xs12:""}},[e("v-text-field",{attrs:{type:"text",label:"Satuan Barang",rules:[t.rules.required,t.rules.textOnly]},model:{value:t.editData.unit,callback:function(a){t.$set(t.editData,"unit",a)},expression:"editData.unit"}})],1)],1)],1),t._v(" "),e("small",[t._v("*Wajib diisi")])],1),t._v(" "),e("v-card-actions",[e("v-spacer"),t._v(" "),e("v-btn",{attrs:{color:"red darken-1",dark:""},on:{click:function(a){a.preventDefault(),t.editDialog=!1,t.resetData()}}},[t._v("Batal")]),t._v(" "),"new"==t.typeInput?e("v-btn",{attrs:{color:"green darken-1",dark:"",loading:t.loading},on:{click:function(a){return a.preventDefault(),t.SendData()}}},[t._v("Tambahkan")]):t._e(),t._v(" "),"edit"==t.typeInput?e("v-btn",{attrs:{color:"orange darken-1",dark:"",loading:t.loading},on:{click:function(a){return a.preventDefault(),t.UpdateData()}}},[t._v("Perbaharui")]):t._e()],1)],1)],1)],1)],1),t._v(" "),e("v-layout",{attrs:{row:"","justify-center":""}},[e("v-dialog",{attrs:{persistent:"","max-width":"290"},model:{value:t.deleteDialog,callback:function(a){t.deleteDialog=a},expression:"deleteDialog"}},[e("v-card",[e("v-card-title",{staticClass:"headline"},[t._v("Hapus Data Sparepart Ini ?")]),t._v(" "),e("v-card-text",[t._v("Data yang dihapus tidak akan bisa dikembalikan lagi")]),t._v(" "),e("v-card-actions",[e("v-spacer"),t._v(" "),e("v-btn",{attrs:{color:"green darken-1",flat:""},on:{click:function(a){return t.resetData()}}},[t._v("Batal")]),t._v(" "),e("v-btn",{attrs:{color:"red darken-1",flat:""},on:{click:function(a){return t.deleteData()}}},[t._v("Hapus")])],1)],1)],1)],1)],1)])},i=[function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"column"},[e("h1",{staticClass:"title"},[t._v("Daftar Sparepart")])])}],s={render:r,staticRenderFns:i};a.a=s},71:function(t,a,e){"use strict";Object.defineProperty(a,"__esModule",{value:!0});var r=e(135),i=e(196),s=e(12),l=s(r.a,i.a,!1,null,null,null);a.default=l.exports}});
//# sourceMappingURL=7.7d436954f89d74e64689.js.map