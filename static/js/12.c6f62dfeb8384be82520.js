webpackJsonp([12],{129:function(t,e,a){"use strict";e.a={mounted:function(){this.$parent.tab="branchD3",this.getData(),this.getVehicle(),this.getCities()},data:function(){return{customer:{},load:!1,cities:[],valid:!0,typeInput:"new",role:"semua",saveRole:"",stat:"",search:"",detailTransactions:[],dialog:!1,deleteDialog:!1,editDialog:!1,snackbar:!1,text:"",color:null,reset:!1,jt:[{initials:"SV",name:"Service"},{initials:"SP",name:"Sparepart"},{initials:"SS",name:"Service & Sparepart"}],editData:{licensePlate:"",vehicle_id:"",transaction_id:-1},vehicles:[],deleteId:-1,loading:!1,loadData:!0,isPaginated:!0,isPaginationSimple:!0,defaultSortDirection:"desc",currentPage:1,perPage:10,roles:[],emailRules:[function(t){return!!t||"Email tidak boleh kosong"},function(t){return/.+@.+/.test(t)||"Email tidak valid"}],rules:{required:function(t){return!!t||"Data ini tidak boleh kosong"},numberOnly:function(t){return!isNaN(t)||"Data tidak valid, hanya diijinkan memasukkan angka"},textOnly:function(t){return RegExp(/^[A-Za-z ]+$/).test(t)||"Data tidak valid, hanya diijinkan memasukkan huruf"}}}},computed:{detailTransactionsList:function(){var t=this;if(this.detailTransactions.length)return this.detailTransactions.filter(function(e,a){return""===t.search||e.vehicle_customer.licensePlate.toLowerCase().includes(t.search.toLowerCase())})}},methods:{gotoRoute:function(t){this.$router.push({name:"detailTransactionItem",params:{transactionType:this.$route.params.transactionType,transactionNumber:this.$route.params.transactionNumber,idTransaction:this.$route.params.idTransaction,detailId:t}})},cekPhoneNumber:function(){var t=this,e={headers:{Authorization:"Bearer "+localStorage.getItem("token")}},a=this.$apiUrl+"cekPhoneNumber/"+this.editData.phoneNumber;this.$http.get(a,e).then(function(e){0!==e.data&&t.seteditData(e.data)})},citiesFilter:function(t,e,a){var i=t.name.toLowerCase(),n=e.toLowerCase();return i.indexOf(n)>-1},getCities:function(){var t=this,e=this.$apiUrl+"cities";this.$http.get(e).then(function(e){t.cities=e.data})},getVehicle:function(){var t,e=this,a={headers:{Authorization:"Bearer "+localStorage.getItem("token")}};t=this.$apiUrl+"vehicle",this.$http.get(t,a).then(function(t){e.vehicles=t.data;for(var a=0;a<e.vehicles.length;a++)e.vehicles[a].name=e.vehicles[a].merk+" "+e.vehicles[a].type})},seteditData:function(t){this.editData.id=t.id,this.editData.licensePlate=t.licensePlate,this.editData.vehicle_id=t.vehicle.id},resetData:function(){this.$refs.form.reset(),this.typeInput="new",this.editData.role=null,this.editData.email=null,this.saveRole="",this.load=!1},deleteData:function(){var t=this;this.load=!0;var e={headers:{Authorization:"Bearer "+localStorage.getItem("token")}},a=this.$apiUrl+"detailTransaction/"+this.deleteId;this.$http.delete(a,e).then(function(e){t.snackbar=!0,t.text="Data berhasil dihapus",t.color="green",t.getData()}).catch(function(e){console.log(e),t.snackbar=!0,t.text="Coba Lagi",t.color="red",t.load=!1})},SendData:function(){var t=this;if(!this.$refs.form.validate())return this.snackbar=!0,this.text="Mohon untuk melengkapi form yang tersedia",void(this.color="error");this.editData.transaction_id=this.$route.params.idTransaction,this.load=!0;var e={headers:{Authorization:"Bearer "+localStorage.getItem("token")}},a=this.$apiUrl+"detailTransaction";this.$http.post(a,this.editData,e).then(function(e){t.resetData(),t.getData()}).catch(function(e){console.log(e.response),t.load=!1,t.snackbar=!0,t.color="error",t.text=e.response.data.errors.phoneNumber[0]})},UpdateData:function(){var t,e=this,a={headers:{Authorization:"Bearer "+localStorage.getItem("token")}};this.editData.transaction_id=this.$route.params.idTransaction,this.load=!0,t=this.$apiUrl+"detailTransaction/"+this.editData.id,this.$http.post(t,this.editData,a).then(function(t){console.log(t),e.getData()}).catch(function(t){console.log(t),e.snackbar=!0,e.text="Coba Lagi",e.color="red",e.load=!1})},getData:function(){var t=this;this.editDialog=!1,this.deleteDialog=!1,this.load=!1;var e={headers:{Authorization:"Bearer "+localStorage.getItem("token")}},a=this.$apiUrl+"detailTransaction/"+this.$route.params.idTransaction;this.$http.get(a,e).then(function(e){t.detailTransactions=e.data,t.loadData=!1,t.$nextTick(function(){this.getCustomer()})})},getCustomer:function(){var t=this,e={headers:{Authorization:"Bearer "+localStorage.getItem("token")}},a=this.$apiUrl+"customer/"+this.$route.params.idTransaction;this.$http.get(a,e).then(function(e){t.customer=e.data})},updateStatus:function(t){var e=this,a={headers:{Authorization:"Bearer "+localStorage.getItem("token")}},i=this.$apiUrl+"api/user/status/"+t.id;0===t.status?t.status=1:t.status=0,this.$http.patch(i,{status:t.status},a).then(function(t){console.log(t)}).catch(function(t){console.log(t),e.snackbar=!0,e.text="Coba lagi",e.color="error",e.load=!1})}}}},188:function(t,e,a){"use strict";var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"contentlist"},[a("div",{staticClass:"flex-container"},[a("nav",{staticClass:"breadcrumb",attrs:{"aria-label":"breadcrumbs"}},[a("ul",[a("li",[a("router-link",{attrs:{to:{name:"branchD3"}}},[t._v("Transaction")])],1),t._v(" "),a("li",{staticClass:"is-active"},[a("a",{attrs:{href:"#"}},[t._v(t._s(t.$route.params.transactionType+"-"+t.$route.params.transactionNumber+"-"+t.$route.params.idTransaction))])])])]),t._v(" "),a("div",{staticClass:"columns m-t-10"},[a("div",{staticClass:"column"},[a("h1",{staticClass:"title"},[t._v("Detail Transaksi "),a("br"),t._v(" Konsumen: "),a("br"),t._v(" "+t._s(t.customer.name)+" "),a("br"),t._v(" "+t._s(t.customer.phoneNumber))])]),t._v(" "),a("div",{staticClass:"column"},[a("v-flex",{staticStyle:{"margin-left":"auto"},attrs:{sm6:"","d-flex":""}},[a("v-btn",{attrs:{slot:"activator",color:"blue lighten-2",dark:""},on:{click:function(e){e.preventDefault(),t.editDialog=!0,t.typeInput="new"}},slot:"activator"},[t._v("Tambahkan Kendaraan")])],1)],1)]),t._v(" "),a("nav",{staticClass:"level"},[a("div",{staticClass:"level-left"},[a("b-field",{attrs:{grouped:"","group-multiline":""}},[a("b-select",{attrs:{disabled:!t.isPaginated},model:{value:t.perPage,callback:function(e){t.perPage=e},expression:"perPage"}},[a("option",{attrs:{value:"10"}},[t._v("10 per page")]),t._v(" "),a("option",{attrs:{value:"20"}},[t._v("20 per page")]),t._v(" "),a("option",{attrs:{value:"50"}},[t._v("50 per page")])])],1)],1),t._v(" "),a("div",{staticClass:"level-right"},[a("b-field",[a("b-input",{attrs:{placeholder:"Search...",type:"search",icon:"magnify"},model:{value:t.search,callback:function(e){t.search=e},expression:"search"}})],1)],1)]),t._v(" "),a("b-table",{attrs:{data:t.detailTransactionsList,paginated:!0,"per-page":t.perPage,"current-page":t.currentPage,loading:t.loadData,"pagination-simple":!0,narrowed:!0,"mobile-cards":!0,striped:!0,hoverable:!0},on:{"update:currentPage":function(e){t.currentPage=e},"update:current-page":function(e){t.currentPage=e}},scopedSlots:t._u([{key:"default",fn:function(e){return[a("b-table-column",{attrs:{label:"No.",sortable:""}},[t._v(t._s(e.index+1))]),t._v(" "),a("b-table-column",{attrs:{field:"vehicle_customer.licensePlate",label:"Plat Nomor",sortable:""}},[t._v(t._s(e.row.vehicle_customer.licensePlate))]),t._v(" "),a("b-table-column",{attrs:{field:"vehicle_customer.vehicle.merk",label:"Merk",sortable:""}},[t._v(t._s(e.row.vehicle_customer.vehicle.merk))]),t._v(" "),a("b-table-column",{attrs:{field:"vehicle_customer.vehicle.type",label:"Tipe",sortable:""}},[t._v(t._s(e.row.vehicle_customer.vehicle.type))]),t._v(" "),a("b-table-column",{attrs:{label:"Pengaturan",sortable:""}},[a("v-btn",{attrs:{color:"green",small:"",dark:""},on:{click:function(a){return a.preventDefault(),t.gotoRoute(e.row.id)}}},[t._v("Detail")])],1),t._v(" "),a("b-table-column",{attrs:{label:""}},[a("v-menu",{attrs:{transition:"slide-x-transition","offset-x":"",left:""}},[a("v-btn",{attrs:{slot:"activator",icon:""},slot:"activator"},[a("v-icon",[t._v("more_vert")])],1),t._v(" "),a("v-list",[a("v-list-tile",{on:{click:function(a){a.preventDefault(),t.seteditData(e.row.vehicle_customer),t.editDialog=!0,t.typeInput="edit"}}},[a("v-list-tile-title",[t._v("Perbaharui")])],1),t._v(" "),a("v-list-tile",{on:{click:function(a){a.preventDefault(),t.deleteId=e.row.id,t.deleteDialog=!0}}},[a("v-list-tile-title",[t._v("Hapus")])],1)],1)],1)],1)]}}])},[t._v(" "),a("template",{slot:"empty"},[a("section",{staticClass:"section"},[a("div",{staticClass:"content has-text-grey has-text-centered"},[a("p",[a("b-icon",{attrs:{icon:"emoticon-sad",size:"is-large"}})],1),t._v(" "),a("p",[t._v("Belum ada data pegawai, silahkan tambahkan pegawai terlebih dahulu")])])])])],2),t._v(" "),a("v-snackbar",{attrs:{color:t.color,"multi-line":!0,timeout:3e3},model:{value:t.snackbar,callback:function(e){t.snackbar=e},expression:"snackbar"}},[t._v("\r\n          "+t._s(t.text)+"\r\n          "),a("v-btn",{attrs:{dark:"",flat:""},on:{click:function(e){t.snackbar=!1}}},[t._v("\r\n            Close\r\n          ")])],1),t._v(" "),a("v-layout",{attrs:{row:"","justify-center":""}},[a("v-dialog",{attrs:{persistent:"","max-width":"600px"},model:{value:t.editDialog,callback:function(e){t.editDialog=e},expression:"editDialog"}},[a("v-form",{ref:"form",attrs:{"lazy-validation":""},model:{value:t.valid,callback:function(e){t.valid=e},expression:"valid"}},[a("v-card",[a("v-card-title",[t._v("\r\n                                    Kendaraan Konsumen\r\n                                ")]),t._v(" "),a("v-card-text",[a("v-container",{attrs:{"grid-list-md":""}},[a("v-layout",{attrs:{wrap:""}},[a("v-flex",{attrs:{xs12:""}},[a("v-text-field",{attrs:{label:"Plat Nomor*",required:"",rules:[t.rules.required]},model:{value:t.editData.licensePlate,callback:function(e){t.$set(t.editData,"licensePlate",e)},expression:"editData.licensePlate"}})],1),t._v(" "),a("v-flex",{attrs:{xs12:""}},[a("v-autocomplete",{attrs:{items:t.vehicles,"item-text":"name","item-value":"id",label:"Jenis kendaraan",hint:"Kendaraan apa yang cocok untuk sparepart ini?","persistent-hint":""},model:{value:t.editData.vehicle_id,callback:function(e){t.$set(t.editData,"vehicle_id",e)},expression:"editData.vehicle_id"}})],1)],1)],1),t._v(" "),a("small",[t._v("*Wajib diisi")])],1),t._v(" "),a("v-card-actions",[a("v-spacer"),t._v(" "),a("v-btn",{attrs:{color:"red darken-1",dark:""},on:{click:function(e){e.preventDefault(),t.editDialog=!1,t.resetData()}}},[t._v("Batal")]),t._v(" "),"new"==t.typeInput?a("v-btn",{attrs:{color:"green darken-1",dark:"",loading:t.load},on:{click:function(e){return e.preventDefault(),t.SendData()}}},[t._v("Tambahkan")]):t._e(),t._v(" "),"edit"==t.typeInput?a("v-btn",{attrs:{color:"orange darken-1",dark:"",loading:t.load},on:{click:function(e){return e.preventDefault(),t.UpdateData()}}},[t._v("Perbaharui")]):t._e()],1)],1)],1)],1)],1),t._v(" "),a("v-layout",{attrs:{row:"","justify-center":""}},[a("v-dialog",{attrs:{persistent:"","max-width":"290"},model:{value:t.deleteDialog,callback:function(e){t.deleteDialog=e},expression:"deleteDialog"}},[a("v-card",[a("v-card-title",{staticClass:"headline"},[t._v("Hapus Data Pengguna ?")]),t._v(" "),a("v-card-text",[t._v("Data yang dihapus tidak akan bisa dikembalikan lagi")]),t._v(" "),a("v-card-actions",[a("v-spacer"),t._v(" "),a("v-btn",{attrs:{color:"green darken-1",flat:""},on:{click:function(e){t.deleteDialog=!1,t.deleteId=-1}}},[t._v("Batal")]),t._v(" "),a("v-btn",{attrs:{color:"red darken-1",flat:""},on:{click:function(e){return t.deleteData()}}},[t._v("Hapus")])],1)],1)],1)],1)],1)])},n=[],r={render:i,staticRenderFns:n};e.a=r},65:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=a(129),n=a(188),r=a(12),s=r(i.a,n.a,!1,null,null,null);e.default=s.exports}});
//# sourceMappingURL=12.c6f62dfeb8384be82520.js.map