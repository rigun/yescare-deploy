webpackJsonp([6],{136:function(t,e,a){"use strict";e.a={mounted:function(){this.$parent.tab="branchD3",this.getData(),this.getRoles(),this.getCities()},data:function(){return{load:!1,cities:[],valid:!0,typeInput:"new",role:"semua",saveRole:"",stat:"",search:"",users:[],dialog:!1,deleteDialog:!1,editDialog:!1,snackbar:!1,text:"",color:null,reset:!1,jt:[{initials:"SV",name:"Service"},{initials:"SP",name:"Sparepart"},{initials:"SS",name:"Service & Sparepart"}],editData:{name:"",role:"konsumen",phoneNumber:"",address:"",city:"",jenisTransaksi:""},deleteId:-1,loading:!1,loadData:!0,isPaginated:!0,isPaginationSimple:!0,defaultSortDirection:"desc",currentPage:1,perPage:10,roles:[],emailRules:[function(t){return!!t||"Email tidak boleh kosong"},function(t){return/.+@.+/.test(t)||"Email tidak valid"}],rules:{required:function(t){return!!t||"Data ini tidak boleh kosong"},numberOnly:function(t){return!isNaN(t)||"Data tidak valid, hanya diijinkan memasukkan angka"},textOnly:function(t){return RegExp(/^[A-Za-z ]+$/).test(t)||"Data tidak valid, hanya diijinkan memasukkan huruf"}}}},computed:{usersList:function(){var t=this;if(this.users.length)return this.users.filter(function(e,a){var r=e.transactionNumber+"-"+e.id;return""===t.search||(r.toLowerCase().includes(t.search.toLowerCase())||e.customer.name.toLowerCase().includes(t.search.toLowerCase()))})}},methods:{gotoRoute:function(t,e){var a=t.split("-");this.$router.push({name:"detailTransaction",params:{transactionType:a[0],transactionNumber:a[1],idTransaction:e}})},cekPhoneNumber:function(){var t=this,e={headers:{Authorization:"Bearer "+localStorage.getItem("token")}},a=this.$apiUrl+"cekPhoneNumber/"+this.editData.phoneNumber;this.$http.get(a,e).then(function(e){0!==e.data&&t.seteditData(e.data)})},citiesFilter:function(t,e,a){var r=t.name.toLowerCase(),i=e.toLowerCase();return r.indexOf(i)>-1},getCities:function(){var t=this,e=this.$apiUrl+"cities";this.$http.get(e).then(function(e){t.cities=e.data})},getRoles:function(){var t=this,e={headers:{Authorization:"Bearer "+localStorage.getItem("token")}},a=this.$apiUrl+"role";this.$http.get(a,e).then(function(e){t.roles=e.data,t.roles.push({name:"semua"})})},seteditData:function(t){this.editData.id=t.id,this.editData.name=t.name,this.editData.phoneNumber=t.phoneNumber,this.editData.address=t.address,this.editData.city=t.city},resetData:function(){this.$refs.form.reset(),this.typeInput="new",this.editData.role=null,this.editData.email=null,this.saveRole="",this.load=!1},deleteData:function(){var t=this;this.load=!0;var e={headers:{Authorization:"Bearer "+localStorage.getItem("token")}},a=this.$apiUrl+"transaction/"+this.deleteId;this.$http.delete(a,e).then(function(e){t.snackbar=!0,t.text="Data berhasil dihapus",t.color="green",t.getData()}).catch(function(e){console.log(e),t.snackbar=!0,t.text="Coba Lagi",t.color="red",t.load=!1})},SendData:function(){var t=this;if(!this.$refs.form.validate())return this.snackbar=!0,this.text="Mohon untuk melengkapi form yang tersedia",void(this.color="error");this.editData.role="konsumen",this.load=!0;var e={headers:{Authorization:"Bearer "+localStorage.getItem("token")}},a=this.$apiUrl+"transaction";this.editData.branch=this.$route.params.id,this.$http.post(a,this.editData,e).then(function(e){t.resetData(),t.getData()}).catch(function(e){console.log(e.response),t.load=!1,t.snackbar=!0,t.color="error",t.text=e.response.data.errors.phoneNumber[0]})},UpdateData:function(){var t,e=this,a={headers:{Authorization:"Bearer "+localStorage.getItem("token")}};this.editData.role="konsumen",this.load=!0,t=this.$apiUrl+"updateperson/"+this.editData.id,this.$http.post(t,this.editData,a).then(function(t){console.log(t),e.getData()}).catch(function(t){console.log(t),e.snackbar=!0,e.text="Coba Lagi",e.color="red",e.load=!1})},getData:function(){var t=this;this.editDialog=!1,this.deleteDialog=!1,this.load=!1;var e={headers:{Authorization:"Bearer "+localStorage.getItem("token")}},a=this.$apiUrl+"transactionByBranch/"+this.$route.params.id;this.$http.get(a,e).then(function(e){t.users=e.data,t.loadData=!1})},updateStatus:function(t){var e=this,a={headers:{Authorization:"Bearer "+localStorage.getItem("token")}},r=this.$apiUrl+"transaction/status/"+t.id;this.$http.patch(r,{status:t.status},a).then(function(t){console.log(t),e.getData()}).catch(function(t){console.log(t),e.snackbar=!0,e.text="Coba lagi",e.color="error",e.load=!1})}}}},197:function(t,e,a){"use strict";var r=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"contentlist"},[a("div",{staticClass:"flex-container"},[a("div",{staticClass:"columns m-t-10"},[t._m(0),t._v(" "),a("div",{staticClass:"column"},[a("v-flex",{staticStyle:{"margin-left":"auto"},attrs:{sm6:"","d-flex":""}},[a("v-btn",{attrs:{slot:"activator",color:"blue lighten-2",dark:""},on:{click:function(e){e.preventDefault(),t.editDialog=!0,t.typeInput="new"}},slot:"activator"},[t._v("Transaksi Baru")])],1)],1)]),t._v(" "),a("nav",{staticClass:"level"},[a("div",{staticClass:"level-left"},[a("b-field",{attrs:{grouped:"","group-multiline":""}},[a("b-select",{attrs:{disabled:!t.isPaginated},model:{value:t.perPage,callback:function(e){t.perPage=e},expression:"perPage"}},[a("option",{attrs:{value:"10"}},[t._v("10 per page")]),t._v(" "),a("option",{attrs:{value:"20"}},[t._v("20 per page")]),t._v(" "),a("option",{attrs:{value:"50"}},[t._v("50 per page")])])],1)],1),t._v(" "),a("div",{staticClass:"level-right"},[a("b-field",[a("b-input",{attrs:{placeholder:"Search...",type:"search",icon:"magnify"},model:{value:t.search,callback:function(e){t.search=e},expression:"search"}})],1)],1)]),t._v(" "),a("b-table",{attrs:{data:t.usersList,paginated:!0,"per-page":t.perPage,"current-page":t.currentPage,loading:t.loadData,"pagination-simple":!0,narrowed:!0,"mobile-cards":!0,striped:!0,hoverable:!0,"default-sort-direction":t.defaultSortDirection,"default-sort":"created_at"},on:{"update:currentPage":function(e){t.currentPage=e},"update:current-page":function(e){t.currentPage=e}},scopedSlots:t._u([{key:"default",fn:function(e){return[a("b-table-column",{attrs:{label:"No.",sortable:""}},[t._v(t._s(e.index+1))]),t._v(" "),a("b-table-column",{attrs:{label:"Nomor Transaksi",sortable:""}},[t._v(t._s(e.row.transactionNumber+"-"+e.row.id))]),t._v(" "),a("b-table-column",{attrs:{field:"customer.name",label:"Nama Konsumen",sortable:""}},[t._v(t._s(e.row.customer.name))]),t._v(" "),a("b-table-column",{attrs:{field:"customer.phoneNumber",label:"Nomor Handphone",sortable:""}},[t._v(t._s(e.row.customer.phoneNumber))]),t._v(" "),a("b-table-column",{attrs:{field:"customer.address",label:"Alamat",sortable:""}},[t._v(t._s(e.row.customer.address)+","+t._s(e.row.customer.city))]),t._v(" "),a("b-table-column",{attrs:{field:"status",label:"Status",sortable:""}},[0==e.row.status?a("span",[a("v-chip",{attrs:{color:"blue",dark:""}},[t._v("Pengisian Data")])],1):t._e(),t._v(" "),1==e.row.status?a("span",[a("v-chip",{attrs:{color:"orange",dark:""}},[t._v("Sedang Dikerjakan")])],1):t._e(),t._v(" "),2==e.row.status?a("span",[a("v-chip",{attrs:{color:"yellow"}},[t._v("Pengerjaan Selesai")])],1):t._e(),t._v(" "),3==e.row.status?a("span",[a("v-chip",{attrs:{color:"green",dark:""}},[t._v("Transaksi Selesai")])],1):t._e()]),t._v(" "),a("b-table-column",{attrs:{label:"Pengaturan",sortable:""}},[a("v-btn",{attrs:{color:"green",small:"",dark:""},on:{click:function(a){return a.preventDefault(),t.gotoRoute(e.row.transactionNumber,e.row.id)}}},[t._v("Detail")])],1),t._v(" "),a("b-table-column",{attrs:{label:"Diterima pada",sortable:""}},[t._v(t._s(e.row.created_at))]),t._v(" "),a("b-table-column",{attrs:{label:""}},[a("v-menu",{attrs:{transition:"slide-x-transition","offset-x":"",left:""}},[a("v-btn",{attrs:{slot:"activator",icon:""},slot:"activator"},[a("v-icon",[t._v("more_vert")])],1),t._v(" "),a("v-list",[a("v-list-tile",{on:{click:function(a){a.preventDefault(),t.seteditData(e.row.customer),t.editDialog=!0,t.typeInput="edit"}}},[a("v-list-tile-title",[t._v("Perbaharui")])],1),t._v(" "),0!=e.row.status?a("v-list-tile",{on:{click:function(a){return a.preventDefault(),t.updateStatus(e.row)}}},[a("v-list-tile-title",[2!=e.row.status?a("span",[t._v("Pengerjaan Selesai")]):a("span",[t._v("Pengerjaan Diperpanjang")])])],1):t._e(),t._v(" "),a("v-list-tile",{on:{click:function(a){a.preventDefault(),t.deleteId=e.row.id,t.deleteDialog=!0}}},[a("v-list-tile-title",[t._v("Hapus")])],1)],1)],1)],1)]}}])},[t._v(" "),a("template",{slot:"empty"},[a("section",{staticClass:"section"},[a("div",{staticClass:"content has-text-grey has-text-centered"},[a("p",[a("b-icon",{attrs:{icon:"emoticon-sad",size:"is-large"}})],1),t._v(" "),a("p",[t._v("Belum ada data pegawai, silahkan tambahkan pegawai terlebih dahulu")])])])])],2),t._v(" "),a("v-snackbar",{attrs:{color:t.color,"multi-line":!0,timeout:3e3},model:{value:t.snackbar,callback:function(e){t.snackbar=e},expression:"snackbar"}},[t._v("\r\n          "+t._s(t.text)+"\r\n          "),a("v-btn",{attrs:{dark:"",flat:""},on:{click:function(e){t.snackbar=!1}}},[t._v("\r\n            Close\r\n          ")])],1),t._v(" "),a("v-layout",{attrs:{row:"","justify-center":""}},[a("v-dialog",{attrs:{persistent:"","max-width":"600px"},model:{value:t.editDialog,callback:function(e){t.editDialog=e},expression:"editDialog"}},[a("v-form",{ref:"form",attrs:{"lazy-validation":""},model:{value:t.valid,callback:function(e){t.valid=e},expression:"valid"}},[a("v-card",[a("v-card-title",[t._v("\r\n                                    Buat Transaksi Baru\r\n                                ")]),t._v(" "),a("v-card-text",[a("v-container",{attrs:{"grid-list-md":""}},[a("v-layout",{attrs:{wrap:""}},[a("v-flex",{attrs:{xs12:""}},[a("v-text-field",{attrs:{label:"Nama Konsumen*",required:"",rules:[t.rules.required,t.rules.textOnly]},model:{value:t.editData.name,callback:function(e){t.$set(t.editData,"name",e)},expression:"editData.name"}})],1),t._v(" "),a("v-flex",{attrs:{xs12:""}},[a("v-text-field",{attrs:{label:"Nomor Handphone Konsumen*",required:"",rules:[t.rules.required,t.rules.numberOnly]},on:{change:function(e){return t.cekPhoneNumber()}},model:{value:t.editData.phoneNumber,callback:function(e){t.$set(t.editData,"phoneNumber",e)},expression:"editData.phoneNumber"}})],1),t._v(" "),a("v-flex",{attrs:{xs12:""}},[a("v-text-field",{attrs:{label:"Alamat Konsumen*",required:"",rules:[t.rules.required]},model:{value:t.editData.address,callback:function(e){t.$set(t.editData,"address",e)},expression:"editData.address"}})],1),t._v(" "),a("v-flex",{attrs:{xs12:""}},[a("v-autocomplete",{attrs:{items:t.cities,filter:t.citiesFilter,"item-text":"name",label:"Kota Konsumen",rules:[t.rules.required]},model:{value:t.editData.city,callback:function(e){t.$set(t.editData,"city",e)},expression:"editData.city"}})],1),t._v(" "),"edit"!=t.typeInput?a("v-flex",{attrs:{xs12:""}},[a("v-autocomplete",{attrs:{items:t.jt,"item-text":"name","item-value":"initials",label:"Jenis Transaksi",rules:[t.rules.required]},model:{value:t.editData.jenisTransaksi,callback:function(e){t.$set(t.editData,"jenisTransaksi",e)},expression:"editData.jenisTransaksi"}})],1):t._e()],1)],1),t._v(" "),a("small",[t._v("*Wajib diisi")])],1),t._v(" "),a("v-card-actions",[a("v-spacer"),t._v(" "),a("v-btn",{attrs:{color:"red darken-1",dark:""},on:{click:function(e){e.preventDefault(),t.editDialog=!1,t.resetData()}}},[t._v("Batal")]),t._v(" "),"new"==t.typeInput?a("v-btn",{attrs:{color:"green darken-1",dark:"",loading:t.load},on:{click:function(e){return e.preventDefault(),t.SendData()}}},[t._v("Tambahkan")]):t._e(),t._v(" "),"edit"==t.typeInput?a("v-btn",{attrs:{color:"orange darken-1",dark:"",loading:t.load},on:{click:function(e){return e.preventDefault(),t.UpdateData()}}},[t._v("Perbaharui")]):t._e()],1)],1)],1)],1)],1),t._v(" "),a("v-layout",{attrs:{row:"","justify-center":""}},[a("v-dialog",{attrs:{persistent:"","max-width":"290"},model:{value:t.deleteDialog,callback:function(e){t.deleteDialog=e},expression:"deleteDialog"}},[a("v-card",[a("v-card-title",{staticClass:"headline"},[t._v("Hapus Data Pengguna ?")]),t._v(" "),a("v-card-text",[t._v("Data yang dihapus tidak akan bisa dikembalikan lagi")]),t._v(" "),a("v-card-actions",[a("v-spacer"),t._v(" "),a("v-btn",{attrs:{color:"green darken-1",flat:""},on:{click:function(e){t.deleteDialog=!1,t.deleteId=-1}}},[t._v("Batal")]),t._v(" "),a("v-btn",{attrs:{color:"red darken-1",flat:""},on:{click:function(e){return t.deleteData()}}},[t._v("Hapus")])],1)],1)],1)],1)],1)])},i=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"column"},[a("h1",{staticClass:"title"},[t._v("Transaksi Cabang")])])}],n={render:r,staticRenderFns:i};e.a=n},72:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=a(136),i=a(197),n=a(12),s=n(r.a,i.a,!1,null,null,null);e.default=s.exports}});
//# sourceMappingURL=6.c503814fc582b3507219.js.map